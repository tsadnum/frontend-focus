<div class="page-header">
  <div class="header-left">
    <button mat-icon-button [routerLink]="'/dashboard'" aria-label="Back to dashboard" class="back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="page-title-section">
      <h1 class="page-title">My Goals</h1>
      <p class="page-subtitle" *ngIf="goals.length > 0">
        {{ goals.length }} {{ goals.length === 1 ? 'goal' : 'goals' }}
      </p>
    </div>
  </div>
  <div class="header-actions">
    <button mat-icon-button (click)="addGoal()" matTooltip="New Goal" class="header-add-button">
      <mat-icon>add</mat-icon>
    </button>
  </div>
</div>

<div class="entries-container">
  <div *ngIf="loading" class="loading-container">
    <mat-progress-spinner diameter="50"></mat-progress-spinner>
    <p>Loading your goals...</p>
  </div>

  <div *ngIf="!loading && goals.length === 0" class="empty-state">
    <mat-icon class="empty-icon">flag</mat-icon>
    <p class="empty-text">You haven't set any goals yet. Create your first one!</p>
    <button mat-raised-button color="primary" (click)="addGoal()">
      <mat-icon>add</mat-icon>
      Create First Goal
    </button>
  </div>

  <div class="entries-grid" *ngIf="!loading && goals.length > 0">
    <div *ngFor="let goal of goals" class="entry-card dashboard-card">
      <!-- CARD HEADER -->
      <div class="card-header">
        <div class="entry-info">
          <h3 class="card-title">
            <mat-icon class="goal-icon">flag</mat-icon>
            {{ goal.title }}
          </h3>
          <span class="entry-date">Target date: {{ goal.targetDate | date: 'mediumDate' }}</span>
        </div>
        <div class="header-spacer"></div>
        <div class="entry-actions">
          <button mat-icon-button color="primary" (click)="editGoal(goal)" matTooltip="Edit goal">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteGoal(goal)" matTooltip="Delete goal">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <div class="card-content">
        <p class="entry-text" *ngIf="goal.description">{{ goal.description }}</p>
        <mat-progress-bar
          [value]="goal.progress"
          [color]="goal.progress === 100 ? 'accent' : 'primary'">
        </mat-progress-bar>
      </div>
    </div>
  </div>
</div>

<button
  mat-fab
  color="primary"
  class="fab-button"
  (click)="addGoal()"
  matTooltip="New Goal"
>
  <mat-icon>add</mat-icon>
</button>
